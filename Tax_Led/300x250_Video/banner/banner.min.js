function iOSversion(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}function initAnimation(){video=document.getElementById("video-el"),window.makeVideoPlayableInline(video),(md.phone()||md.tablet())&&(isDesktop=!1,iOSversion()[0]>9&&(isDesktop=!0),TweenLite.set("#video",{autoAlpha:0}),TweenLite.set(".bg-image",{alpha:1,zIndex:110}))}function videoSetup(){console.log("video setup"),$("#video").show();var e=document.getElementById("video-el");$("#video video").load(),$("#video video").bind("loadeddata",function(t){3!=e.readyState&&4!=e.readyState&&2!=e.readyState&&"complete"!=e.readyState&&"loaded"!=e.readyState||(initCSS(),startAnimation(),console.log("start"))}),$("#video video").bind("error",function(e){$("#video").hide(),initCSS(),startAnimation()})}function initCSS(){TweenLite.set($("#blue-shape"),{alpha:1,rotation:50,scaleX:.4,scaleY:.4,x:60,y:80,overwrite:"none",force3D:!1}),TweenLite.set($("#blue-shape-small"),{alpha:1,rotation:-20,scaleX:.2,scaleY:.2,x:140,y:83,overwrite:"none",force3D:!1}),TweenLite.set($("#mask-shape"),{rotation:30,scaleX:.3,scaleY:.3,x:-2235,y:-1270,overwrite:"none",force3D:!1}),TweenLite.set($(".shapes"),{rotation:160,transformOrigin:"50% 50%",overwrite:"none",force3D:!1}),TweenLite.set($("#red-gradient"),{autoAlpha:0,rotation:70,x:-210,y:60,scale:.8}),TweenLite.set($("#partnership-white-shape-small"),{y:-9}),TweenLite.set($("#logos-container"),{y:-4,scale:1.05}),TweenLite.set("#messaging-frame-01b",{alpha:0}),$(".banner").hover(function(){$("#cta-button").addClass("hover")},function(){$("#cta-button").removeClass("hover")}),$(".overlay").length?($(".terms").click(function(){console.log("extended terms"),$(".overlay").fadeIn(),$(".terms").fadeOut()}),$(".overlay-close").click(function(){$(".overlay").fadeOut(),$(".terms").fadeIn()})):$(".terms").click(function(){console.log("clicktag invoked"),window.open(clickTag)}),$(".clicktag").click(function(){console.log("clicktag invoked"),window.open(clickTag)})}function startAnimation(){console.log("startAnimation"),$(".container").show(),$(".loader").hide(),bannerWidth=$(".container").width(),bannerHeight=$(".container").height();var e=new SplitText("#bonus",{type:"words,chars"}),t=new SplitText("#june",{type:"words,chars"}),a=new SplitText("#tax",{type:"words,chars"}),o=(e.chars,t.chars,a.chars);tl=new TimelineLite,tl.from("#messaging-frame-00",2,{alpha:0,y:-10,ease:Power1.easeOut},"1"),tl.fromTo(".bg-image-01",1,{alpha:0,ease:Power1.easeIn},{alpha:0,ease:Power1.easeOut},"2"),tl.from(".qantas-logo-colour",1.8,{alpha:0,y:-10,ease:Power1.easeInOut},"1"),tl.from(".logo-qantas",2,{alpha:0,ease:Power1.easeInOut},"1"),tl.from(".terms",1.2,{alpha:0,ease:Power1.easeOut},"4.6"),tl.from("#partnership-white-shape-small",2.5,{autoAlpha:.4,rotation:90,x:55,scaleY:1.2,ease:Power1.easeOut},"0.2"),tl.to("#white-grad-small-stop-01",2,{stopOpacity:1,stopColor:"#FFFFFF",ease:Power1.easeInOut},"1.3"),tl.to("#white-grad-small-stop-02",2,{stopOpacity:1,stopColor:"#FFFFFF",ease:Power1.easeInOut},"1.3"),tl.to("#white-grad-small-stop-03",1.5,{stopOpacity:1,stopColor:"#FFFFFF",ease:Power1.easeInOut},"1"),tl.to("#red-grad-values",2.5,{attr:{cx:0,cy:295,r:450},ease:Power2.easeInOut},"0"),tl.to("#base-grad-stop-01",1,{stopOpacity:0,ease:Power2.easeOut},".2"),tl.to("#base-grad-stop-02",2,{stopOpacity:0,ease:Power2.easeInOut},".4"),tl.to("#base-grad-stop-03",3,{stopOpacity:0,ease:Power2.easeInOut},".4"),tl.to("#red-gradient",3,{rotation:-30,autoAlpha:0,x:0,y:-290,scale:1,ease:Power2.easeInOut},"0"),tl.to(".shapes",2,{alpha:1,rotation:-9,transformOrigin:"50% 50%"},"0"),tl.to("#mask-shape",1.2,{rotation:0,scaleX:1,scaleY:1,x:-2140,y:-1315,ease:Sine.easeInOut},"0"),tl.to("#blue-shape-small",1,{alpha:1,rotation:90,scaleX:.2,scaleY:.2,x:221,y:35,ease:Sine.easeInOut},".3"),tl.to("#blue-shape",1,{rotation:-90,scaleX:1,scaleY:1,x:5,y:130,ease:Sine.easeInOut},".3"),tl.to("#mask-shape",.5,{rotation:0,scaleX:2.2,scaleY:2.2,x:-1950,y:-1315,ease:Power2.easeIn},"1.1"),tl.to("#blue-shape",.4,{rotation:-180,scaleX:1.3,scaleY:1.3,x:-100,y:240,ease:Power2.easeIn},"1.3"),tl.to("#blue-shape-small",.4,{rotation:150,scaleX:.7,scaleY:.7,x:330,y:-95,ease:Power2.easeIn},"1.3"),tl.to("#red-gradient",3.5,{autoAlpha:1,rotation:34,x:-160,y:-225,scale:.8,ease:Power1.easeInOut},"0"),tl.add("imageFrame",3.5),tl.to("#red-gradient",.8,{alpha:0,ease:Power1.easeOut},"imageFrame+=.3"),tl.to("#solid-red-base2",4,{x:660,ease:Power1.easeOut},"imageFrame+=.3"),tl.to("#messaging-frame-00",1,{alpha:0,y:"+=0",ease:Power1.easeIn},"imageFrame+=0.5"),tl.fromTo(".bg-image-01",1,{alpha:0,ease:Power1.easeIn},{alpha:.5,ease:Power1.easeOut},"imageFrame"),tl.add("imageFrame2",4),tl.to(".bg-image-01",1,{alpha:1,ease:Power1.easeInOut},"imageFrame2+=0.5"),tl.from("#video",.5,{alpha:0,ease:Power1.easeInOut,onComplete:function(){video.play()}},"imageFrame2"),tl.add("frame02",6),tl.to(".bg-image-01",1,{alpha:0,ease:Power1.easeIn},"frame02"),tl.to("#video",1,{alpha:0,ease:Power1.easeIn},"frame02"),tl.to("#red-gradient",1,{alpha:1,ease:Power1.easeInOut},"frame02+=.3"),tl.from("#messaging-frame-01",1.2,{alpha:0,y:20,ease:Power1.easeIn},"frame02"),tl.call(countDown,[900,999,0,".points-copy .hundreds-countdown"],this,"frame02+=.3"),tl.add("frame02b",8),tl.to("#messaging-frame-01",1.2,{y:"-=00",ease:Power1.easeInOut},"frame02b"),tl.add("frame03",9),tl.to("#messaging-frame-01",1.2,{alpha:0,y:"+=20",ease:Power1.easeInOut},"frame03+=.3"),tl.to("#messaging-frame-01b",1.2,{alpha:0,y:"+=20",ease:Power1.easeInOut},"frame03+=.3"),tl.from("#messaging-frame-03",2,{alpha:0,y:-20,ease:Power1.easeInOut},"frame03+=.5"),tl.staggerFrom(o,.5,{alpha:0,x:-10,rotationY:360,transformOrigin:"50% 50%",ease:Sine.easeOut},.05,"frame03+=1.3"),tl.add("endframe",13),tl.to("#messaging-frame-03",1.2,{alpha:0,y:"+=20",ease:Power1.easeInOut},"endframe"),tl.from("#messaging-endframe",2,{alpha:0,y:20,ease:Power1.easeInOut},"endframe+=.6"),tl.call(countDown2,[900,999,0,".points-copy2 .hundreds-countdown"],this,"endframe+=.6"),tl.from("#cta-button",2,{alpha:0,ease:Power2.easeInOut},"endframe+=1.5"),tl.to("#red-gradient",3.5,{rotation:-156,x:-440,y:-240,scale:.8,ease:Power1.easeInOut},"endframe+=.5"),tl.from(".logo-divider-line",2,{alpha:0,scaleY:0,transformOrigin:"50% 100%",ease:Power1.easeInOut},"endframe+=.7"),tl.from(".logo-partner",1.3,{alpha:0,y:10,ease:Power1.easeInOut},"endframe+=1.2"),tl.to(".logo-qantas",2,{y:-6,ease:Power1.easeInOut},"endframe+=.5"),tl.from("#partnership-white-shape",2,{x:40,y:35,rotation:20,ease:Power2.easeInOut},"endframe+=.3"),tl.to("#white-grad-stop-01",1.5,{stopOpacity:1,stopColor:"#FFFFFF",ease:Power1.easeInOut},"endframe+=.5"),tl.to("#white-grad-stop-02",1.5,{stopOpacity:1,stopColor:"#FFFFFF",ease:Power1.easeInOut},"endframe+=.7"),tl.to("#white-grad-stop-03",1.5,{stopOpacity:1,stopColor:"#FFFFFF",ease:Power1.easeInOut},"endframe+=.9"),tl.to("#white-grad-small-stop-02",1,{stopOpacity:0,stopColor:"#FFFFFF",ease:Power1.easeInOut},"endframe+=1")}function countDown(e,t,a,o){var n,s=e,t=parseInt(t),a=parseInt(a),i=setInterval(function(){s<t&&(s++,n=s),s===t&&(s=0,n=s),s===a&&($(".points-copy .hundreds-countdown").html("000"),$(".points-copy .thousands-countdown").html("100"),clearInterval(i)),s<10&&(n=s,n="00"+s),$(o).html(n)},18)}function countDown2(e,t,a,o){var n,s=e,t=parseInt(t),a=parseInt(a),i=setInterval(function(){s<t&&(s++,n=s),s===t&&(s=0,n=s),s===a&&($(".points-copy2 .hundreds-countdown").html("000"),$(".points-copy2 .thousands-countdown").html("100"),clearInterval(i)),s<10&&(n=s,n="00"+s),$(o).html(n)},18)}function preloadimages(e){function t(){o++,o==e.length&&n(a)}var a=[],o=0,n=function(){};e="object"!=typeof e?[e]:e;for(var s=0;s<e.length;s++)a[s]=new Image,a[s].src=e[s],a[s].onload=function(){t()},a[s].onerror=function(){t()};return{done:function(e){n=e||n}}}var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;!function(e){"use strict";var t=e.GreenSockGlobals||e,a=function(e){var a,o=e.split("."),n=t;for(a=0;a<o.length;a++)n[o[a]]=n=n[o[a]]||{};return n},o=a("com.greensock.utils"),n=function(e){var t=e.nodeType,a="";if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)a+=n(e)}else if(3===t||4===t)return e.nodeValue;return a},s=document,i=s.defaultView?s.defaultView.getComputedStyle:function(){},r=/([A-Z])/g,l=function(e,t,a,o){var n;return(a=a||i(e,null))?(e=a.getPropertyValue(t.replace(r,"-$1").toLowerCase()),n=e||a.length?e:a[t]):e.currentStyle&&(a=e.currentStyle,n=a[t]),o?n:parseInt(n,10)||0},d=function(e){return!!(e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0]))},p=function(e){var t,a,o,n=[],s=e.length;for(t=0;s>t;t++)if(a=e[t],d(a))for(o=a.length,o=0;o<a.length;o++)n.push(a[o]);else n.push(a);return n},h=")eefec303079ad17405c",c=/(?:<br>|<br\/>|<br \/>)/gi,u=s.all&&!s.addEventListener,f="<div style='position:relative;display:inline-block;"+(u?"*display:inline;*zoom:1;'":"'"),m=function(e){e=e||"";var t=-1!==e.indexOf("++"),a=1;return t&&(e=e.split("++").join("")),function(){return f+(e?" class='"+e+(t?a++:"")+"'>":">")}},g=o.SplitText=t.SplitText=function(e,t){if("string"==typeof e&&(e=g.selector(e)),!e)throw"cannot split a null element.";this.elements=d(e)?p(e):[e],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)},w=function(e,t,a){var o=e.nodeType;if(1===o||9===o||11===o)for(e=e.firstChild;e;e=e.nextSibling)w(e,t,a);else(3===o||4===o)&&(e.nodeValue=e.nodeValue.split(t).join(a))},y=function(e,t){for(var a=t.length;--a>-1;)e.push(t[a])},v=function(e,t,a,o,r){c.test(e.innerHTML)&&(e.innerHTML=e.innerHTML.replace(c,h));var d,p,u,f,g,v,x,O,b,I,F,P,S,T,C=n(e),$=t.type||t.split||"chars,words,lines",L=-1!==$.indexOf("lines")?[]:null,_=-1!==$.indexOf("words"),k=-1!==$.indexOf("chars"),A="absolute"===t.position||t.absolute===!0,H=A?"&#173; ":" ",D=-999,N=i(e),B=l(e,"paddingLeft",N),Y=l(e,"borderBottomWidth",N)+l(e,"borderTopWidth",N),j=l(e,"borderLeftWidth",N)+l(e,"borderRightWidth",N),E=l(e,"paddingTop",N)+l(e,"paddingBottom",N),M=l(e,"paddingLeft",N)+l(e,"paddingRight",N),W=l(e,"textAlign",N,!0),X=e.clientHeight,R=e.clientWidth,V="</div>",q=m(t.wordsClass),G=m(t.charsClass),z=-1!==(t.linesClass||"").indexOf("++"),Q=t.linesClass,Z=-1!==C.indexOf("<"),J=!0,K=[],U=[],ee=[];for(z&&(Q=Q.split("++").join("")),Z&&(C=C.split("<").join("{{LT}}")),d=C.length,f=q(),g=0;d>g;g++)if(x=C.charAt(g),")"===x&&C.substr(g,20)===h)f+=(J?V:"")+"<BR/>",J=!1,g!==d-20&&C.substr(g+20,20)!==h&&(f+=" "+q(),J=!0),g+=19;else if(" "===x&&" "!==C.charAt(g-1)&&g!==d-1&&C.substr(g-20,20)!==h){for(f+=J?V:"",J=!1;" "===C.charAt(g+1);)f+=H,g++;(")"!==C.charAt(g+1)||C.substr(g+1,20)!==h)&&(f+=H+q(),J=!0)}else"{"===x&&"{{LT}}"===C.substr(g,6)?(f+=k?G()+"{{LT}}</div>":"{{LT}}",g+=5):f+=k&&" "!==x?G()+x+"</div>":x;for(e.innerHTML=f+(J?V:""),Z&&w(e,"{{LT}}","<"),v=e.getElementsByTagName("*"),d=v.length,O=[],g=0;d>g;g++)O[g]=v[g];if(L||A)for(g=0;d>g;g++)b=O[g],u=b.parentNode===e,(u||A||k&&!_)&&(I=b.offsetTop,L&&u&&I!==D&&"BR"!==b.nodeName&&(p=[],L.push(p),D=I),A&&(b._x=b.offsetLeft,b._y=I,b._w=b.offsetWidth,b._h=b.offsetHeight),L&&(_!==u&&k||(p.push(b),b._x-=B),u&&g&&(O[g-1]._wordEnd=!0),"BR"===b.nodeName&&b.nextSibling&&"BR"===b.nextSibling.nodeName&&L.push([])));for(g=0;d>g;g++)b=O[g],u=b.parentNode===e,"BR"!==b.nodeName?(A&&(P=b.style,_||u||(b._x+=b.parentNode._x,b._y+=b.parentNode._y),P.left=b._x+"px",P.top=b._y+"px",P.position="absolute",P.display="block",P.width=b._w+1+"px",P.height=b._h+"px"),_?u&&""!==b.innerHTML?U.push(b):k&&K.push(b):u?(e.removeChild(b),O.splice(g--,1),d--):!u&&k&&(I=!L&&!A&&b.nextSibling,e.appendChild(b),I||e.appendChild(s.createTextNode(" ")),K.push(b))):L||A?(e.removeChild(b),O.splice(g--,1),d--):_||e.appendChild(b);if(L){for(A&&(F=s.createElement("div"),e.appendChild(F),S=F.offsetWidth+"px",I=F.offsetParent===e?0:e.offsetLeft,e.removeChild(F)),P=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(T=!A||!_&&!k,g=0;g<L.length;g++){for(p=L[g],F=s.createElement("div"),F.style.cssText="display:block;text-align:"+W+";position:"+(A?"absolute;":"relative;"),Q&&(F.className=Q+(z?g+1:"")),ee.push(F),d=p.length,v=0;d>v;v++)"BR"!==p[v].nodeName&&(b=p[v],F.appendChild(b),T&&(b._wordEnd||_)&&F.appendChild(s.createTextNode(" ")),A&&(0===v&&(F.style.top=b._y+"px",F.style.left=B+I+"px"),b.style.top="0px",I&&(b.style.left=b._x-I+"px")));0===d&&(F.innerHTML="&nbsp;"),_||k||(F.innerHTML=n(F).split(String.fromCharCode(160)).join(" ")),A&&(F.style.width=S,F.style.height=b._h+"px"),e.appendChild(F)}e.style.cssText=P}A&&(X>e.clientHeight&&(e.style.height=X-E+"px",e.clientHeight<X&&(e.style.height=X+Y+"px")),R>e.clientWidth&&(e.style.width=R-M+"px",e.clientWidth<R&&(e.style.width=R+j+"px"))),y(a,K),y(o,U),y(r,ee)},x=g.prototype;x.split=function(e){this.isSplit&&this.revert(),this.vars=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t=this.elements.length;--t>-1;)this._originals[t]=this.elements[t].innerHTML,v(this.elements[t],this.vars,this.chars,this.words,this.lines);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},x.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var e=this._originals.length;--e>-1;)this.elements[e].innerHTML=this._originals[e];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},g.selector=e.$||e.jQuery||function(t){var a=e.$||e.jQuery;return a?(g.selector=a,a(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)},g.version="0.3.4"}(_gsScope),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define(["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(module.exports=t())}("SplitText");var container,content,dcLogo,bgExit,tl,preload,isDesktop=!0,md=new MobileDetect(window.navigator.userAgent),video;$(document).ready(function(){var e=["base-image-01.jpg","logo-qantas.svg","logo-partner.svg","shape-blue.svg","shape-mask.svg","shape-red.svg","shape-white.svg"];preloadimages(e).done(function(e){console.log("loaded"),imagesLoaded=!0,initCSS(),initAnimation()})}),isDesktop?videoSetup():(initCSS(),startAnimation());var percentFill=80,duration=1.5;